import{u as ee,M as s,W as $,h as U}from"./chartEditStore-55367357.js";import{bd as te,aC as g,aB as P}from"./index-b19b4ad2.js";var G={exports:{}};(function(a){(function(f){var n,i={},c={16:!1,18:!1,17:!1,91:!1},L="all",T={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,command:91},M={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},E=function(e){return M[e]||e.toUpperCase().charCodeAt(0)},y=[];for(n=1;n<20;n++)M["f"+n]=111+n;function A(e,t){for(var r=e.length;r--;)if(e[r]===t)return r;return-1}function I(e,t){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}var N={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function H(e){for(n in c)c[n]=e[N[n]]}function x(e){var t,r,o,w,u,K;if(t=e.keyCode,A(y,t)==-1&&y.push(t),(t==93||t==224)&&(t=91),t in c){c[t]=!0;for(o in T)T[o]==t&&(v[o]=!0);return}if(H(e),!!v.filter.call(this,e)&&t in i){for(K=O(),w=0;w<i[t].length;w++)if(r=i[t][w],r.scope==K||r.scope=="all"){u=r.mods.length>0;for(o in c)(!c[o]&&A(r.mods,+o)>-1||c[o]&&A(r.mods,+o)==-1)&&(u=!1);(r.mods.length==0&&!c[16]&&!c[18]&&!c[17]&&!c[91]||u)&&r.method(e,r)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}}function B(e){var t=e.keyCode,r,o=A(y,t);if(o>=0&&y.splice(o,1),(t==93||t==224)&&(t=91),t in c){c[t]=!1;for(r in T)T[r]==t&&(v[r]=!1)}}function z(){for(n in c)c[n]=!1;for(n in T)v[n]=!1}function v(e,t,r){var o,w;o=W(e),r===void 0&&(r=t,t="all");for(var u=0;u<o.length;u++)w=[],e=o[u].split("+"),e.length>1&&(w=b(e),e=[e[e.length-1]]),e=e[0],e=E(e),e in i||(i[e]=[]),i[e].push({shortcut:o[u],scope:t,method:r,key:o[u],mods:w})}function Y(e,t){var r,o,w=[],u,K,_;for(r=W(e),K=0;K<r.length;K++){if(o=r[K].split("+"),o.length>1&&(w=b(o),e=o[o.length-1]),e=E(e),t===void 0&&(t=O()),!i[e])return;for(u=0;u<i[e].length;u++)_=i[e][u],_.scope===t&&I(_.mods,w)&&(i[e][u]={})}}function X(e){return typeof e=="string"&&(e=E(e)),A(y,e)!=-1}function j(){return y.slice(0)}function q(e){var t=(e.target||e.srcElement).tagName;return!(t=="INPUT"||t=="SELECT"||t=="TEXTAREA")}for(n in T)v[n]=!1;function J(e){L=e||"all"}function O(){return L||"all"}function Q(e){var t,r,o;for(t in i)for(r=i[t],o=0;o<r.length;)r[o].scope===e?r.splice(o,1):o++}function W(e){var t;return e=e.replace(/\s/g,""),t=e.split(","),t[t.length-1]==""&&(t[t.length-2]+=","),t}function b(e){for(var t=e.slice(0,e.length-1),r=0;r<t.length;r++)t[r]=T[t[r]];return t}function C(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent&&e.attachEvent("on"+t,function(){r(window.event)})}C(document,"keydown",function(e){x(e)}),C(document,"keyup",B),C(window,"focus",z);var Z=f.key;function V(){var e=f.key;return f.key=Z,e}f.key=v,f.key.setScope=J,f.key.getScope=O,f.key.deleteScope=Q,f.key.filter=q,f.key.isPressed=X,f.key.getPressedKeyCodes=j,f.key.noConflict=V,f.key.unbind=Y,a.exports=v})(te)})(G);var l=G.exports;const h=ee(),R=a=>`${$.CTRL}+${a}`,k=a=>`${$.SHIFT}+${a}`,d={[s.ARROW_UP]:R("up"),[s.ARROW_RIGHT]:R("right"),[s.ARROW_DOWN]:R("down"),[s.ARROW_LEFT]:R("left"),[s.COPY]:R("c"),[s.CUT]:R("x"),[s.PARSE]:R("v"),[s.DELETE]:"delete",[s.BACK]:R("z"),[s.FORWORD]:R(k("z")),[s.GROUP]:R("g"),[s.UN_GROUP]:R(k("g"))},m=a=>`${U.CTRL}+${a}`,S=a=>`${U.SHIFT}+${a}`,p={[s.ARROW_UP]:m("arrowup"),[s.ARROW_RIGHT]:m("arrowright"),[s.ARROW_DOWN]:m("arrowdown"),[s.ARROW_LEFT]:m("arrowleft"),[s.COPY]:m("c"),[s.CUT]:m("x"),[s.PARSE]:m("v"),[s.DELETE]:m("backspace"),[s.BACK]:m("z"),[s.FORWORD]:m(S("z")),[s.GROUP]:m("g"),[s.UN_GROUP]:m(S("g"))},D=[d.up,d.right,d.down,d.left,d.delete,d.copy,d.cut,d.parse,d.back,d.forward,d.group,d.unGroup],F=[p.up,p.right,p.down,p.left,p.delete,p.copy,p.cut,p.parse,p.back,p.forward,p.group,p.unGroup],re=()=>{window.$KeyboardActive&&(window.$KeyboardActive=new Set([])),document.onkeydown=a=>{window.$KeyboardActive?window.$KeyboardActive.add(a.key.toLocaleLowerCase()):window.$KeyboardActive=new Set([a.key.toLocaleLowerCase()])},document.onkeyup=a=>{window.$KeyboardActive&&window.$KeyboardActive.delete(a.key.toLocaleLowerCase())}},se=()=>{const f=(n,i)=>{switch(i){case n.up:l(i,g(()=>(h.setMove(s.ARROW_UP),!1),50));break;case n.right:l(i,g(()=>(h.setMove(s.ARROW_RIGHT),!1),50));break;case n.down:l(i,g(()=>(h.setMove(s.ARROW_DOWN),!1),50));break;case n.left:l(i,g(()=>(h.setMove(s.ARROW_LEFT),!1),50));break;case n.delete:l(i,P(()=>(h.removeComponentList(),!1),50));break;case n.copy:l(i,P(()=>(h.setCopy(),!1),50));break;case n.cut:l(i,P(()=>(h.setCut(),!1),50));break;case n.parse:l(i,g(()=>(h.setParse(),!1),50));break;case n.back:l(i,g(()=>(h.setBack(),!1),50));break;case n.forward:l(i,g(()=>(h.setForward(),!1),50));break;case n.group:l(i,g(()=>(h.setGroup(),!1),50));break;case n.unGroup:l(i,g(()=>(h.setUnGroup(),!1),50));break}};D.forEach(n=>{f(d,n)}),F.forEach(n=>{f(p,n)}),re()},ie=()=>{document.onkeydown=()=>{},document.onkeyup=()=>{},D.forEach(a=>{l.unbind(a)}),F.forEach(a=>{l.unbind(a)})};export{se as a,ie as u};
