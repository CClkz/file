import{D as Q}from"./vuedraggable.umd-e88e9e5d.js";import{m as A,c as V,bh as Y,y as N,a7 as y,e as v,o as _,n as O,B as S,h as C,u as n,ab as X,w as d,q as B,t as j,af as G,x as q,f,F as Z,D as ee,am as te,V as oe,O as ne,ac as se}from"./index-b19b4ad2.js";import{C as ae}from"./index-637edbea.js";import{u as re,C as ce}from"./chartLayoutStore.d-6c5a994b.js";import{u as F,M as $,W as K,h as U,j as P}from"./chartEditStore-55367357.js";import{u as z,d as ie}from"./index-50d109ef.js";import{i as W}from"./icon-f8369abc.js";import"./plugin-70b98fce.js";import"./settingStore-0bf047be.js";import"./index-cec7b165.js";import"./index-8a2d1b8f.js";const le={class:"go-flex-center item-content"},ue=V({__name:"index",props:{componentData:{type:Object,required:!0}},setup(p){const m=p;Y(g=>({"5ef4ab89":n(b)}));const D=N(),s=F(),b=y(()=>D.getAppTheme),{image:c}=m.componentData.chartConfig,h=y(()=>{const g=m.componentData.id;return s.getTargetChart.selectId.find(T=>T===g)}),x=y(()=>m.componentData.id===s.getTargetChart.hoverId);return(g,T)=>{const L=v("n-image"),M=v("n-text"),w=v("n-ellipsis");return _(),O("div",{class:G(["go-content-layers-list-item",{hover:n(x),select:n(h)}])},[S("div",le,[C(L,{class:"list-img","object-fit":"contain","preview-disabled":"",src:n(c),"fallback-src":n(X)()},null,8,["src","fallback-src"]),C(w,null,{default:d(()=>[C(M,{class:"list-text",depth:2},{default:d(()=>[B(j(m.componentData.chartConfig.title),1)]),_:1})]),_:1})]),S("div",{class:G({"select-modal":n(h)})},null,2)],2)}}});var J=A(ue,[["__scopeId","data-v-3192b12e"]]);const de={class:"go-content-layers-group-list-item"},pe={class:"go-flex-items-center item-content"},me=V({__name:"index",props:{componentGroupData:{type:Object,required:!0}},setup(p){const m=p;Y(t=>({"3ac1ced4":n(T)})),$.UN_GROUP;const D=N(),{FolderIcon:s,FolderOpenIcon:b}=W.ionicons5,c=F(),{handleContextMenu:h,onClickOutSide:x}=z(),g=q(!1),T=y(()=>D.getAppTheme),L=(t,e,o)=>{const l=I=>{const E=[];return e.forEach(u=>{I.includes(u.key)&&E.push(u)}),E};return c.getTargetChart.selectId.length>1?l([$.GROUP]):[...l([$.UN_GROUP]),ie(),...t]},M=t=>{var e,o;((e=window.$KeyboardActive)==null?void 0:e.has(K.CTRL_SOURCE_KEY))||((o=window.$KeyboardActive)==null?void 0:o.has(U.CTRL_SOURCE_KEY))||(g.value=!g.value,a(t,m.componentGroupData))},w=y(()=>{const t=m.componentGroupData.id;return c.getTargetChart.selectId.find(e=>e===t)}),R=y(()=>m.componentGroupData.id===c.getTargetChart.hoverId),H=t=>{var o,l;x();const e=m.componentGroupData.id;if(t.buttons===P.LEFT&&(((o=window.$KeyboardActive)==null?void 0:o.has(K.CTRL_SOURCE_KEY))||((l=window.$KeyboardActive)==null?void 0:l.has(U.CTRL_SOURCE_KEY)))){if(c.targetChart.selectId.includes(e)){const I=c.targetChart.selectId.filter(E=>E!==e);c.setTargetSelectChart(I)}else c.setTargetSelectChart(e,!0);return}c.setTargetSelectChart(e)},a=(t,e,o)=>{t.preventDefault(),t.stopPropagation(),x(),c.setTargetSelectChart(o||e.id)},r=t=>{c.setTargetHoverChart(t.id)},i=t=>{c.setTargetHoverChart(void 0)};return(t,e)=>{const o=v("n-icon"),l=v("n-text"),I=v("n-ellipsis"),E=v("n-collapse-transition");return _(),O("div",de,[S("div",{class:G(["root-item-content",{hover:n(R),select:n(w)}]),onClick:e[0]||(e[0]=u=>M(u)),onMousedown:e[1]||(e[1]=u=>H(u)),onMouseenter:e[2]||(e[2]=u=>r(p.componentGroupData)),onMouseleave:e[3]||(e[3]=u=>i(p.componentGroupData)),onContextmenu:e[4]||(e[4]=u=>n(h)(u,p.componentGroupData,L))},[S("div",pe,[C(o,{size:"20",class:"go-ml-1"},{default:d(()=>[g.value?(_(),f(n(b),{key:0})):(_(),f(n(s),{key:1}))]),_:1}),C(I,null,{default:d(()=>[C(l,{class:"go-ml-2 list-text",depth:2},{default:d(()=>[B(j(p.componentGroupData.chartConfig.title),1)]),_:1})]),_:1})]),S("div",{class:G({"select-modal":n(w)})},null,2)],34),C(E,{show:g.value},{default:d(()=>[(_(!0),O(Z,null,ee(p.componentGroupData.groupList,u=>(_(),f(n(J),{key:u.id,componentData:u,onMousedown:k=>a(k,u,p.componentGroupData.id),onMouseenter:k=>r(u),onMouseleave:k=>i(),onContextmenu:e[5]||(e[5]=k=>n(h)(k,p.componentGroupData,L))},null,8,["componentData","onMousedown","onMouseenter","onMouseleave"]))),128))]),_:1},8,["show"])])}}});var _e=A(me,[["__scopeId","data-v-1dcb5e46"]]);const ge={class:"go-content-layer-box"},ve=V({__name:"index",setup(p){const{LayersIcon:m}=W.ionicons5,D=re(),s=F(),{handleContextMenu:b,onClickOutSide:c}=z(),h=q([]),x=y(()=>te(s.getComponentList).reverse());oe(()=>x.value,a=>{h.value=a});const g=(a,r,i)=>{if(s.getTargetChart.selectId.length>1){const t=[];return a.forEach(e=>{e.key===$.GROUP&&t.push(e)}),t}return a},T=()=>{D.setItem(ce.LAYERS,!1)},L=a=>{const{oldIndex:r,newIndex:i}=a.moved;if(i-r>0){const t=s.getComponentList.splice(-(r+1),1)[0];s.getComponentList.splice(-i,0,t)}else{const t=s.getComponentList.splice(-(r+1),1)[0];i===0?s.getComponentList.push(t):s.getComponentList.splice(-i,0,t)}},M=a=>{const r=document.querySelector(".go-content-layer-box");a.target.contains(r)&&s.setTargetSelectChart()},w=(a,r)=>{var t,e;c();const i=r.id;if(a.buttons===P.LEFT&&(((t=window.$KeyboardActive)==null?void 0:t.has(K.CTRL_SOURCE_KEY))||((e=window.$KeyboardActive)==null?void 0:e.has(U.CTRL_SOURCE_KEY)))){if(s.targetChart.selectId.includes(i)){const o=s.targetChart.selectId.filter(l=>l!==i);s.setTargetSelectChart(o)}else s.setTargetSelectChart(i,!0);return}s.setTargetSelectChart(i)},R=a=>{s.setTargetHoverChart(a.id)},H=a=>{s.setTargetHoverChart(void 0)};return(a,r)=>{const i=v("n-icon"),t=v("n-text"),e=v("n-space");return _(),f(n(ae),{class:G(["go-content-layers",{scoped:!n(D).getLayers}]),title:"\u56FE\u5C42",depth:2,onBack:T,onMousedown:r[1]||(r[1]=o=>M(o))},{icon:d(()=>[C(i,{size:"16",depth:2},{default:d(()=>[(_(),f(ne(n(m))))]),_:1})]),default:d(()=>[n(x).length===0?(_(),f(e,{key:0,justify:"center"},{default:d(()=>[C(t,{class:"not-layer-text"},{default:d(()=>[B("\u6682\u65E0\u56FE\u5C42~")]),_:1})]),_:1})):se("",!0),C(n(Q),{"item-key":"id",modelValue:h.value,"onUpdate:modelValue":r[0]||(r[0]=o=>h.value=o),ghostClass:"ghost",onChange:L},{item:d(({element:o})=>[S("div",ge,[o.isGroup?(_(),f(n(_e),{key:0,componentGroupData:o},null,8,["componentGroupData"])):(_(),f(n(J),{key:1,componentData:o,onMousedown:l=>w(l,o),onMouseenter:l=>R(o),onMouseleave:l=>H(),onContextmenu:l=>n(b)(l,o,g)},null,8,["componentData","onMousedown","onMouseenter","onMouseleave","onContextmenu"]))])]),_:1},8,["modelValue"])]),_:1},8,["class"])}}});var be=A(ve,[["__scopeId","data-v-502f837a"]]);export{be as default};
