var A=Object.defineProperty;var $=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var L=(t,e,o)=>e in t?A(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,h=(t,e)=>{for(var o in e||(e={}))N.call(e,o)&&L(t,o,e[o]);if($)for(var o of $(e))j.call(e,o)&&L(t,o,e[o]);return t};var I=(t,e,o)=>new Promise((r,i)=>{var s=d=>{try{a(o.next(d))}catch(l){i(l)}},n=d=>{try{a(o.throw(d))}catch(l){i(l)}},a=d=>d.done?r(d.value):Promise.resolve(d.value).then(s,n);a((o=o.apply(t,e)).next())});import{aC as y,aD as K,S as U,m as _,c as S,o as u,n as w,D as k,af as R,u as c,aE as T,aF as p,aG as x,aH as H,f as C,O,F as P,a7 as m,x as f,z as V,aI as g,a8 as v,B as X,h as E,ac as W}from"./index-6ccd5825.js";import{c as Y,u as D,C as M}from"./chartEditStore-44b9e00c.js";import{f as Q}from"./index-b1421cf8.js";import"./plugin-514415b8.js";import"./icon-dc9ec865.js";import"./settingStore-65bf2a19.js";import"./_arrayMap-5cc68f6d.js";import"./table_scrollboard-cd5bf2a6.js";import"./http-d0ef036b.js";import"./SettingItemBox-51ef5e55.js";/* empty css                                                                   */import"./CollapseItem-78f64ffb.js";const J=(t,e,o,r)=>{const i=t,s=e,n={width:1,height:1},a=parseFloat((i/s).toFixed(5)),d=()=>{const q=parseFloat((window.innerWidth/window.innerHeight).toFixed(5));o&&(q>a?(n.width=parseFloat((window.innerHeight*a/i).toFixed(5)),n.height=parseFloat((window.innerHeight/s).toFixed(5)),o.style.transform=`scale(${n.width}, ${n.height})`):(n.height=parseFloat((window.innerWidth/a/s).toFixed(5)),n.width=parseFloat((window.innerWidth/i).toFixed(5)),o.style.transform=`scale(${n.width}, ${n.height})`),r&&r(n))},l=y(()=>{d()},200);return{calcRate:d,windowResize:()=>{window.addEventListener("resize",l)},unWindowResize:()=>{window.removeEventListener("resize",l)}}},Z=(t,e,o,r)=>{const i=t,s=e,n={width:1,height:1},a=parseFloat((i/s).toFixed(5)),d=()=>{o&&(n.height=parseFloat((window.innerWidth/a/s).toFixed(5)),n.width=parseFloat((window.innerWidth/i).toFixed(5)),o.style.transform=`scale(${n.width}, ${n.height})`,r&&r(n))},l=y(()=>{d()},200);return{calcRate:d,windowResize:()=>{window.addEventListener("resize",l)},unWindowResize:()=>{window.removeEventListener("resize",l)}}},ee=(t,e,o,r)=>{const i=t,s=e,n={height:1,width:1},a=parseFloat((i/s).toFixed(5)),d=()=>{o&&(n.width=parseFloat((window.innerHeight*a/i).toFixed(5)),n.height=parseFloat((window.innerHeight/s).toFixed(5)),o.style.transform=`scale(${n.width}, ${n.height})`,r&&r(n))},l=y(()=>{d()},200);return{calcRate:d,windowResize:()=>{window.addEventListener("resize",l)},unWindowResize:()=>{window.removeEventListener("resize",l)}}},te=(t,e,o,r)=>{const i={width:1,height:1},s=()=>{o&&(i.width=parseFloat((window.innerWidth/t).toFixed(5)),i.height=parseFloat((window.innerHeight/e).toFixed(5)),o.style.transform=`scale(${i.width}, ${i.height})`,r&&r(i))},n=y(()=>{s()},200);return{calcRate:s,windowResize:()=>{window.addEventListener("resize",n)},unWindowResize:()=>{window.removeEventListener("resize",n)}}},G=(t,e)=>({zIndex:e+1,left:`${t.x}px`,top:`${t.y}px`}),B=(t,e)=>({width:`${e?e*t.w:t.w}px`,height:`${e?e*t.h:t.h}px`}),ne=t=>{const e=t.selectColor?{background:t.background}:{background:`url(${t.backgroundImage}) center center / cover no-repeat !important`};return h({position:"relative",width:t.width?`${t.width||100}px`:"100%",height:t.height?`${t.height}px`:"100%"},e)},oe=()=>{const e=document.location.hash.split("/"),o=e&&e[e.length-1],r=K(U.GO_CHART_STORAGE_LIST);if(!!r){for(let i=0;i<r.length;i++)if(o.toString()===r[i].id)return r[i]}};const ie=S({__name:"index",props:{groupData:{type:Object,required:!0},themeSetting:{type:Object,required:!0},themeColor:{type:Object,required:!0},groupIndex:{type:Number,required:!0}},setup(t){return(e,o)=>(u(!0),w(P,null,k(t.groupData.groupList,r=>(u(),w("div",{class:R(["chart-item",c(T)(r.styles.animations)]),key:r.id,style:p(h(h(h({},c(G)(r.attr,t.groupIndex)),c(x)(r.styles)),c(H)(r.styles)))},[(u(),C(O(r.chartConfig.chartKey),{chartConfig:r,themeSetting:t.themeSetting,themeColor:t.themeColor,style:p(h({},c(B)(r.attr)))},null,8,["chartConfig","themeSetting","themeColor","style"]))],6))),128))}});var re=_(ie,[["__scopeId","data-v-0cb90c20"]]);const se=S({__name:"index",props:{localStorageInfo:{type:Object,required:!0}},setup(t){const e=t,o=m(()=>e.localStorageInfo.editCanvasConfig.chartThemeSetting),r=m(()=>{const i=e.localStorageInfo.editCanvasConfig.chartThemeColor;return Y[i]});return(i,s)=>(u(!0),w(P,null,k(t.localStorageInfo.componentList,(n,a)=>(u(),w("div",{class:R(["chart-item",c(T)(n.styles.animations)]),key:n.id,style:p(h(h(h({},c(G)(n.attr,a)),c(x)(n.styles)),c(H)(n.styles)))},[n.isGroup?(u(),C(c(re),{key:0,groupData:n,groupIndex:a,themeSetting:c(o),themeColor:c(r)},null,8,["groupData","groupIndex","themeSetting","themeColor"])):(u(),C(O(n.chartConfig.chartKey),{key:1,chartConfig:n,themeSetting:c(o),themeColor:c(r),style:p(h({},c(B)(n.attr)))},null,8,["chartConfig","themeSetting","themeColor","style"]))],6))),128))}});var b=_(se,[["__scopeId","data-v-5fe65ffd"]]);const ae=t=>{const e=f(!1),o=setInterval(()=>{if(window.$vue.component){clearInterval(o);const r=i=>{window.$vue.component(i.chartConfig.chartKey)||window.$vue.component(i.chartConfig.chartKey,Q(i.chartConfig))};t.componentList.forEach(i=>I(void 0,null,function*(){i.isGroup?i.groupList.forEach(s=>{r(s)}):r(i)})),e.value=!0}},200);return{show:e}},ce=t=>{const e=f(),o=f(),r=f(t.editCanvasConfig.width),i=f(t.editCanvasConfig.height);return V(()=>{switch(t.editCanvasConfig.previewScaleType){case g.FIT:(()=>{const{calcRate:s,windowResize:n,unWindowResize:a}=J(r.value,i.value,o.value);s(),n(),v(()=>{a()})})();break;case g.SCROLL_Y:(()=>{const{calcRate:s,windowResize:n,unWindowResize:a}=Z(r.value,i.value,o.value,d=>{const l=e.value;l.style.width=`${r.value*d.width}px`,l.style.height=`${i.value*d.height}px`});s(),n(),v(()=>{a()})})();break;case g.SCROLL_X:(()=>{const{calcRate:s,windowResize:n,unWindowResize:a}=ee(r.value,i.value,o.value,d=>{const l=e.value;l.style.width=`${r.value*d.width}px`,l.style.height=`${i.value*d.height}px`});s(),n(),v(()=>{a()})})();break;case g.FULL:(()=>{const{calcRate:s,windowResize:n,unWindowResize:a}=te(r.value,i.value,o.value);s(),n(),v(()=>{a()})})();break}}),{entityRef:e,previewRef:o}},de=t=>{const e=D();e.requestGlobalConfig=t[M.REQUEST_GLOBAL_CONFIG]};const le=S({__name:"index",setup(t){const e=oe(),o=m(()=>h(h({},ne(e.editCanvasConfig)),x(e.editCanvasConfig))),r=m(()=>{const a=e.editCanvasConfig.previewScaleType;return a===g.SCROLL_Y||a===g.SCROLL_X});de(e);const{entityRef:i,previewRef:s}=ce(e),{show:n}=ae(e);return(a,d)=>(u(),w("div",{class:R(`go-preview ${c(e).editCanvasConfig.previewScaleType}`)},[c(r)?(u(),w("div",{key:0,ref_key:"entityRef",ref:i,class:"go-preview-entity"},[X("div",{ref_key:"previewRef",ref:s,class:"go-preview-scale"},[c(n)?(u(),w("div",{key:0,style:p(c(o))},[E(c(b),{localStorageInfo:c(e)},null,8,["localStorageInfo"])],4)):W("",!0)],512)],512)):(u(),w("div",{key:1,ref_key:"previewRef",ref:s,class:"go-preview-scale"},[c(n)?(u(),w("div",{key:0,style:p(c(o))},[E(c(b),{localStorageInfo:c(e)},null,8,["localStorageInfo"])],4)):W("",!0)],512))],2))}});var xe=_(le,[["__scopeId","data-v-fe3c7e4c"]]);export{xe as default};
