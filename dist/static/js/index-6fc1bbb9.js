var Ge=Object.defineProperty,Ke=Object.defineProperties;var ze=Object.getOwnPropertyDescriptors;var be=Object.getOwnPropertySymbols;var Ne=Object.prototype.hasOwnProperty,Ve=Object.prototype.propertyIsEnumerable;var De=(e,c,n)=>c in e?Ge(e,c,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[c]=n,M=(e,c)=>{for(var n in c||(c={}))Ne.call(c,n)&&De(e,n,c[n]);if(be)for(var n of be(c))Ve.call(c,n)&&De(e,n,c[n]);return e},$e=(e,c)=>Ke(e,ze(c));var Le=(e,c,n)=>new Promise((i,o)=>{var d=u=>{try{C(n.next(u))}catch(r){o(r)}},h=u=>{try{C(n.throw(u))}catch(r){o(r)}},C=u=>u.done?i(u.value):Promise.resolve(u.value).then(d,h);C((n=n.apply(e,c)).next())});import{u as N,E as O,D as We,W as B,h as F,j as ve,c as Ie,M as ae,k as b,l as le,a as je}from"./chartEditStore-55367357.js";import{z as Pe,a8 as qe,al as Ze,m as V,c as G,bh as ce,y as ue,a7 as $,o as S,n as R,p as Ue,F as J,D as te,af as q,aF as X,u as s,ac as Se,B as D,f as K,w,O as Be,aE as me,aG as ie,aH as ye,A as Fe,am as Me,V as de,aC as Je,e as L,d2 as Qe,a6 as he,x as ee,d3 as Ae,H as ge,I as fe,h as E,q as Ee,t as Z,aw as et,W as tt,aP as ot}from"./index-b19b4ad2.js";import{u as Te,d as st}from"./index-50d109ef.js";import{a as nt}from"./useKeyboard.hook-24fc7d84.js";import{c as at,l as pe}from"./index-2cd82a28.js";import{a as rt,b as ke,l as ct}from"./plugin-70b98fce.js";import{C as ut}from"./index-637edbea.js";import{u as lt}from"./settingStore-0bf047be.js";import{i as re}from"./icon-f8369abc.js";import"./index-cec7b165.js";import"./index-8a2d1b8f.js";import"./_arrayMap-5cc68f6d.js";import"./table_scrollboard-cd5bf2a6.js";import"./http-2dc46202.js";import"./SettingItemBox-2d98a0f7.js";/* empty css                                                                   */import"./CollapseItem-6a6bf124.js";const ne=N(),it=()=>{Pe(()=>{ne.setEditCanvas(O.EDIT_LAYOUT_DOM,document.getElementById("go-chart-edit-layout")),ne.setEditCanvas(O.EDIT_CONTENT_DOM,document.getElementById("go-chart-edit-content"));const e=ne.listenerScale();qe(()=>{ne.setEditCanvas(O.EDIT_LAYOUT_DOM,null),ne.setEditCanvas(O.EDIT_CONTENT_DOM,null),e()})})},_=N(),{onClickOutSide:dt}=Te(),pt=e=>Le(void 0,null,function*(){e.preventDefault();try{rt();const c=e.dataTransfer.getData(We.DRAG_KEY);if(!c){ke();return}_.setEditCanvas(O.IS_CREATE,!1);const n=JSON.parse(c);let i=yield at(n);i.setPosition(e.offsetX-i.attr.w/2,e.offsetY-i.attr.h/2),_.addComponentList(i,!1,!0),_.setTargetSelectChart(i.id),ke()}catch(c){ct(),window.$message.warning("\u56FE\u8868\u6B63\u5728\u7814\u53D1\u4E2D, \u656C\u8BF7\u671F\u5F85...")}}),Re=e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer&&(e.dataTransfer.dropEffect="copy")},He=(e,c)=>{if(c){_.setTargetSelectChart(c.id);return}_.setTargetSelectChart(void 0)},_t=(e,c)=>{He();const n=e.offsetX,i=e.offsetY,o=e.screenX,d=e.screenY,h=_.getEditCanvas.scale;_.setMousePosition(void 0,void 0,n,i);const C=pe.exports.throttle(r=>{_.setTargetSelectChart(),_.setEditCanvas(O.IS_SELECT,!0);const g=n+r.screenX-o,a=i+r.screenY-d;_.setMousePosition(g,a);const t={x1:0,y1:0,x2:0,y2:0};g>n&&a>i?(t.x1=n,t.y1=i,t.x2=Math.round(n+(r.screenX-o)/h),t.y2=Math.round(i+(r.screenY-d)/h)):g>n&&a<i?(t.x1=n,t.y1=Math.round(i-(d-r.screenY)/h),t.x2=Math.round(n+(r.screenX-o)/h),t.y2=i):g<n&&a>i?(t.x1=Math.round(n-(o-r.screenX)/h),t.y1=i,t.x2=n,t.y2=Math.round(i+(r.screenY-d)/h)):(t.x1=Math.round(n-(o-r.screenX)/h),t.y1=Math.round(i-(d-r.screenY)/h),t.x2=n,t.y2=i),_.getComponentList.forEach(p=>{if(!_.getTargetChart.selectId.includes(p.id)){const{x:f,y:l,w:v,h:T}=p.attr,y={x1:f,y1:l,x2:f+v,y2:l+T};y.x1-t.x1>=0&&y.y1-t.y1>=0&&y.x2-t.x2<=0&&y.y2-t.y2<=0&&_.setTargetSelectChart(p.id,!0)}})},20),u=()=>{_.setEditCanvas(O.IS_SELECT,!1),_.setMousePosition(0,0,0,0),document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",u)};document.addEventListener("mousemove",C),document.addEventListener("mouseup",u)},Oe=()=>({mouseClickHandle:(o,d)=>{var h,C;if(o.preventDefault(),o.stopPropagation(),((h=window.$KeyboardActive)==null?void 0:h.has(B.CTRL_SOURCE_KEY))||((C=window.$KeyboardActive)==null?void 0:C.has(F.CTRL_SOURCE_KEY)))if(_.targetChart.selectId.includes(d.id)){const u=_.targetChart.selectId.filter(r=>r!==d.id);_.setTargetSelectChart(u)}else _.setTargetSelectChart(d.id,!0)},mousedownHandle:(o,d)=>{var v,T;if(o.preventDefault(),o.stopPropagation(),dt(),o.buttons===ve.LEFT&&(((v=window.$KeyboardActive)==null?void 0:v.has(B.CTRL_SOURCE_KEY))||((T=window.$KeyboardActive)==null?void 0:T.has(F.CTRL_SOURCE_KEY))))return;const h=_.getTargetChart.selectId;if(o.buttons===ve.RIGHT&&h.length>1&&h.includes(d.id)||(_.setTargetSelectChart(d.id),o.buttons===ve.RIGHT))return;const C=_.getEditCanvas.scale,u=_.getEditCanvasConfig.width,r=_.getEditCanvasConfig.height,g=new Map;_.getTargetChart.selectId.forEach(y=>{const x=_.fetchTargetIndex(y);if(x!==-1){const{x:I,y:k,w:z,h:m}=Ze(_.getComponentList[x]).attr;g.set(y,{x:I,y:k,w:z,h:m})}});const a=o.screenX,t=o.screenY;let p=[];_.getTargetChart.selectId.forEach(y=>{if(!g.has(y))return;const x=_.fetchTargetIndex(y);p.push(pe.exports.cloneDeep(_.getComponentList[x]))}),_.setMousePosition(void 0,void 0,a,t);const f=pe.exports.throttle(y=>{_.setEditCanvas(O.IS_DRAG,!0),_.setMousePosition(y.screenX,y.screenY);let x=(y.screenX-a)/C,I=(y.screenY-t)/C;_.getTargetChart.selectId.forEach(k=>{if(!g.has(k))return;const z=_.fetchTargetIndex(k),{x:m,y:Y,w:oe,h:se}=g.get(k),H=_.getComponentList[z];let P=Math.round(m+x),U=Math.round(Y+I);const A=50;P=P<-oe+A?-oe+A:P,U=U<-se+A?-se+A:U,P=P>u-A?u-A:P,U=U>r-A?r-A:U,H.attr=Object.assign(H.attr,{x:P,y:U})})},20),l=()=>{_.setMousePosition(0,0,0,0),_.setEditCanvas(O.IS_DRAG,!1),p.length&&(_.getTargetChart.selectId.forEach(y=>{if(!g.has(y))return;const x=_.fetchTargetIndex(y),I=_.getComponentList[x];p.forEach(k=>{k.id===y&&(k.attr=Object.assign(k.attr,{offsetX:I.attr.x-k.attr.x,offsetY:I.attr.y-k.attr.y}))})}),_.moveComponentList(p)),document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",l)};document.addEventListener("mousemove",f),document.addEventListener("mouseup",l)},mouseenterHandle:(o,d)=>{o.preventDefault(),o.stopPropagation(),_.getEditCanvas.isSelect||_.setTargetHoverChart(d.id)},mouseleaveHandle:(o,d)=>{o.preventDefault(),o.stopPropagation(),_.setEditCanvas(O.IS_DRAG,!1),_.setTargetHoverChart(void 0)}}),ht=(e,c,n)=>{e.stopPropagation(),e.preventDefault(),_.setEditCanvas(O.IS_DRAG,!0);const i=_.getEditCanvas.scale,o=n.x,d=n.y,h=n.w,C=n.h,u=e.screenX,r=e.screenY;_.setMousePosition(u,r);const g=pe.exports.throttle(t=>{_.setMousePosition(t.screenX,t.screenY);let p=Math.round((t.screenX-u)/i),f=Math.round((t.screenY-r)/i);const l=/t/.test(c),v=/b/.test(c),T=/l/.test(c),y=/r/.test(c),x=C+(l?-f:v?f:0),I=h+(T?-p:y?p:0);n.h=x>0?x:0,n.w=I>0?I:0,n.x=o+(T?p:0),n.y=d+(l?f:0)},50),a=()=>{_.setEditCanvas(O.IS_DRAG,!1),_.setMousePosition(0,0,0,0),document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",a)};document.addEventListener("mousemove",g),document.addEventListener("mouseup",a)},_e=(e,c)=>e?{zIndex:c+1,left:`${e.x}px`,top:`${e.y}px`}:{},Q=(e,c)=>e?{width:`${c?c*e.w:e.w}px`,height:`${c?c*e.h:e.h}px`}:{},gt=(e,c,n,i)=>{const{w:o,h:d}=n,h=/t/.test(e),C=/b/.test(e),u=/l/.test(e),r=/r/.test(e);let g=0,a=0;return e.length===2?(g=u?0:o,a=h?0:d):((h||C)&&(g=o/2,a=h?0:d),(u||r)&&(g=u?0:o,a=Math.floor(d/2))),{left:`${g}px`,top:`${a}px`,cursor:i[c]+"-resize"}};const ft={class:"go-shape-box"},vt=["onMousedown"],Ct=G({__name:"index",props:{item:{type:Object,required:!0},hiddenPoint:{type:Boolean,required:!1}},setup(e){const c=e;ce(r=>({"1e6b5a43":s(h)}));const n=ue(),i=N(),o=["t","r","b","l","lt","rt","lb","rb"],d=["n","e","s","w","nw","ne","sw","se"],h=$(()=>n.getAppTheme),C=$(()=>c.item.id===i.getTargetChart.hoverId),u=$(()=>{const r=c.item.id;return i.getTargetChart.selectId.find(g=>g===r)});return(r,g)=>(S(),R("div",ft,[Ue(r.$slots,"default",{},void 0,!0),e.hiddenPoint?Se("",!0):(S(!0),R(J,{key:0},te(s(u)?o:[],(a,t)=>(S(),R("div",{class:q(`shape-point ${a}`),key:t,style:X(s(gt)(a,t,e.item.attr,d)),onMousedown:p=>s(ht)(p,a,e.item.attr)},null,46,vt))),128)),D("div",{class:"shape-modal",style:X(s(Q)(e.item.attr))},[D("div",{class:q(["shape-modal-select",{active:s(u)}])},null,2),D("div",{class:q(["shape-modal-change",{selectActive:s(u),hoverActive:s(C)}])},null,2)],4)]))}});var xe=V(Ct,[["__scopeId","data-v-4d231575"]]);const mt={class:"go-edit-group-box"},yt=G({__name:"index",props:{groupData:{type:Object,required:!0},groupIndex:{type:Number,required:!0}},setup(e){const c=N(),{handleContextMenu:n}=Te(),{mouseenterHandle:i,mouseleaveHandle:o,mousedownHandle:d,mouseClickHandle:h}=Oe(),C=(g,a,t)=>{const p=[ae.GROUP,ae.DELETE],f=[ae.UN_GROUP],l=v=>{const T=[];return a.forEach(y=>{v.includes(y.key)&&T.push(y)}),T};return c.getTargetChart.selectId.length>1?l(p):[...l(f),st(),...g]},u=$(()=>{const g=c.getEditCanvasConfig.chartThemeColor;return Ie[g]}),r=$(()=>c.getEditCanvasConfig.chartThemeSetting);return(g,a)=>(S(),R("div",mt,[(S(),K(s(xe),{key:e.groupData.id,"data-id":e.groupData.id,index:e.groupIndex,item:e.groupData,hiddenPoint:!0,class:q(s(me)(e.groupData.styles.animations)),style:X(M(M(M(M({},s(_e)(e.groupData.attr,e.groupIndex)),s(Q)(e.groupData.attr)),s(ie)(e.groupData.styles)),s(ye)(e.groupData.styles))),onClick:a[0]||(a[0]=t=>s(h)(t,e.groupData)),onMousedown:a[1]||(a[1]=t=>s(d)(t,e.groupData)),onMouseenter:a[2]||(a[2]=t=>s(i)(t,e.groupData)),onMouseleave:a[3]||(a[3]=t=>s(o)(t,e.groupData)),onContextmenu:a[4]||(a[4]=t=>s(n)(t,e.groupData,C))},{default:w(()=>[(S(!0),R(J,null,te(e.groupData.groupList,t=>(S(),K(s(xe),{key:t.id,"data-id":t.id,index:e.groupIndex,item:t,hiddenPoint:!0,style:X(M({},s(_e)(t.attr,e.groupIndex)))},{default:w(()=>[(S(),K(Be(t.chartConfig.chartKey),{class:q(["edit-content-chart",s(me)(t.styles.animations)]),chartConfig:t,themeSetting:s(r),themeColor:s(u),style:X(M(M(M({},s(Q)(t.attr)),s(ie)(t.styles)),s(ye)(t.styles)))},null,8,["class","chartConfig","themeSetting","themeColor","style"]))]),_:2},1032,["data-id","index","item","style"]))),128))]),_:1},8,["data-id","index","item","class","style"]))]))}});const Et={class:"go-edit-align-line"},xt=G({__name:"index",setup(e){ce(f=>({"09403cbc":s(h)}));const c=ue(),n=N(),i=lt(),o=Fe({lineArr:["rowt","rowc","rowb","coll","colc","colr"],select:new Map,sorptioned:{x:!1,y:!1}}),d=f=>f?{left:`${f.x?f.x:0}px`,top:`${f.y?f.y:0}px`}:{},h=$(()=>c.getAppTheme),C=$(()=>i.getChartAlignRange),u=$(()=>n.getEditCanvas[O.IS_DRAG]),r=(f,l)=>Math.abs(f-l)<=C.value,g=$(()=>n.getTargetChart.selectId),a=$(()=>n.getComponentList[n.fetchTargetIndex()]),t=$(()=>{var f;return((f=a.value)==null?void 0:f.attr)||{}}),p=$(()=>({id:"0",attr:{w:Me(n.getEditCanvasConfig.width),h:Me(n.getEditCanvasConfig.height),x:0,y:0,offsetX:0,offsetY:0,zIndex:0}}));return de(()=>n.getMousePosition,Je(()=>{if(!u.value||g.value.length!==1)return;const f=t.value.w,l=t.value.h,v=t.value.x,T=v+f/2,y=v+f,x=t.value.y,I=x+l/2,k=x+l;o.select.clear(),o.sorptioned.y=!1;const z=n.getComponentList.map(m=>({id:m.id,attr:m.attr}));z.push(p.value),o.lineArr.forEach(m=>{z.forEach(Y=>{if(g.value[0]===Y.id)return;const oe=Y.attr.w,se=Y.attr.h,H=Y.attr.x,P=H+oe/2,U=H+oe,A=Y.attr.y,W=A+se/2,j=A+se;m.includes("rowt")&&(r(x,A)&&(o.select.set(m,{y:A}),a.value.setPosition(v,A)),r(x,W)&&(o.select.set(m,{y:W}),a.value.setPosition(v,W)),r(x,j)&&(o.select.set(m,{y:j}),a.value.setPosition(v,j))),m.includes("rowc")&&(r(I,A)&&(o.select.set(m,{y:A}),a.value.setPosition(v,A-l/2)),r(I,W)&&(o.select.set(m,{y:W}),a.value.setPosition(v,W-l/2)),r(I,j)&&(o.select.set(m,{y:j}),a.value.setPosition(v,j-l/2))),m.includes("rowb")&&(r(k,A)&&(o.select.set(m,{y:A}),a.value.setPosition(v,A-l)),r(k,W)&&(o.select.set(m,{y:W}),a.value.setPosition(v,W-l)),r(k,j)&&(o.select.set(m,{y:j}),a.value.setPosition(v,j-l))),m.includes("coll")&&(r(v,H)&&(o.select.set(m,{x:H}),a.value.setPosition(H,x)),r(v,P)&&(o.select.set(m,{x:P}),a.value.setPosition(P,x)),r(v,U)&&(o.select.set(m,{x:U}),a.value.setPosition(U,x))),m.includes("colc")&&(r(T,H)&&(o.select.set(m,{x:H}),a.value.setPosition(H-f/2,x)),r(T,P)&&(o.select.set(m,{x:P}),a.value.setPosition(P-f/2,x)),r(T,U)&&(o.select.set(m,{x:U}),a.value.setPosition(U-f/2,x))),m.includes("colr")&&(r(y,H)&&(o.select.set(m,{x:H}),a.value.setPosition(H-f,x)),r(y,P)&&(o.select.set(m,{x:P}),a.value.setPosition(P-f,x)),r(y,U)&&(o.select.set(m,{x:U}),a.value.setPosition(U-f,x)))})})},200),{deep:!0}),de(()=>u.value,f=>{f||(o.select.clear(),o.sorptioned.y=!1)}),(f,l)=>(S(),R("div",Et,[(S(!0),R(J,null,te(o.lineArr,v=>(S(),R("div",{class:q(["line",[v.includes("row")?"row":"col",o.select.has(v)&&"visible"]]),key:v,style:X(d(o.select.get(v)))},null,6))),128))]))}});var St=V(xt,[["__scopeId","data-v-02c26656"]]);const Tt=G({__name:"index",setup(e){return(c,n)=>{const i=L("n-watermark");return S(),K(i,{id:"go-edit-watermark",content:s(Qe),cross:"",selectable:"","font-size":16,"line-height":16,width:500,height:150,"x-offset":12,"y-offset":80,rotate:-15},null,8,["content"])}}});var wt=V(Tt,[["__scopeId","data-v-60cb5871"]]);const Ye=e=>(ge("data-v-8438ba02"),e=e(),fe(),e),bt=Ye(()=>D("div",{class:"select-background"},null,-1)),Dt=Ye(()=>D("div",{class:"select-border"},null,-1)),$t=[bt,Dt],Lt=G({__name:"index",setup(e){ce(C=>({"0db9691c":s(d)}));const c=ue(),n=N(),{isSelect:i,scale:o}=he(n.getEditCanvas),d=$(()=>c.getAppTheme),h=ee();return de(()=>n.getMousePosition,C=>{if(!i.value)return;const{startX:u,startY:r,x:g,y:a}=C,t={zIndex:Ae,x:0,y:0,w:0,h:0,offsetX:0,offsetY:0};g>u&&a>r?(t.x=u,t.y=r,t.w=Math.round((g-u)/o.value),t.h=Math.round((a-r)/o.value)):g>u&&a<r?(t.x=u,t.w=Math.round((g-u)/o.value),t.h=Math.round((r-a)/o.value),t.y=r-t.h):g<u&&a>r?(t.y=r,t.w=Math.round((u-g)/o.value),t.h=Math.round((a-r)/o.value),t.x=u-t.w):(t.w=Math.round((u-g)/o.value),t.h=Math.round((r-a)/o.value),t.x=u-t.w,t.y=r-t.h),h.value=M(M({},_e(t,Ae)),Q(t))},{deep:!0}),(C,u)=>s(i)?(S(),R("div",{key:0,class:"go-edit-select",style:X(h.value)},$t,4)):Se("",!0)}});var Mt=V(Lt,[["__scopeId","data-v-8438ba02"]]);const At=G({__name:"index",setup(e){const c=N(),{getEditCanvasConfig:n,getEditCanvas:i}=he(c),o=$(()=>({w:n.value.width,h:n.value.height})),d=$(()=>{const C={transform:`scale(${i.value.scale})`};return M(M({},Q(o.value)),C)}),h=$(()=>{const C=i.value.isCreate&&{"z-index":99999};return M(M({},Q(o.value)),C)});return(C,u)=>(S(),R("div",{class:"go-edit-range go-transition",style:X(s(d)),onMousedown:u[0]||(u[0]=r=>s(_t)(r,void 0))},[Ue(C.$slots,"default",{},void 0,!0),E(s(wt)),E(s(St)),E(s(Mt)),D("div",{class:"go-edit-range-model",style:X(s(h))},null,4)],36))}});var kt=V(At,[["__scopeId","data-v-0534a02a"]]);const Rt=G({__name:"index",setup(e){ce(p=>({"2185dfc3":s(t)}));const c=N(),n=ue(),{width:i,height:o}=he(c.getEditCanvasConfig),d=ee(!0),h=-10,C=-10,u=20,r={h:[],v:[]},g=()=>{const p=document.getElementById("go-chart-edit-layout");return p?{height:p.clientHeight-40,width:p.clientWidth}:{width:i.value,height:o.value}},a=$(()=>c.getEditCanvas.scale),t=$(()=>n.getAppTheme);return de(()=>a.value,()=>{d.value=!1,setTimeout(()=>{d.value=!0})}),(p,f)=>{const l=L("sketch-rule");return d.value?(S(),K(l,{key:0,thick:u,scale:s(a),width:g().width,height:g().height,startX:h,startY:C,lines:r},null,8,["scale","width","height"])):Se("",!0)}}}),Ce={[b.ADD]:"\u65B0\u589E\u56FE\u8868",[b.DELETE]:"\u5220\u9664\u56FE\u8868",[b.UPDATE]:"\u4FEE\u6539\u5C5E\u6027",[b.MOVE]:"\u79FB\u52A8\u56FE\u8868",[b.PASTE]:"\u7C98\u8D34\u56FE\u8868",[b.COPY]:"\u590D\u5236\u56FE\u8868",[b.CUT]:"\u526A\u5207\u56FE\u8868",[b.TOP]:"\u5C42\u7EA7\u7F6E\u9876",[b.BOTTOM]:"\u5C42\u7EA7\u7F6E\u5E95",[b.UP]:"\u5C42\u7EA7\u4E0A\u79FB",[b.DOWN]:"\u5C42\u7EA7\u4E0B\u79FB",[b.GROUP]:"\u521B\u5EFA\u5206\u7EC4",[b.UN_GROUP]:"\u89E3\u9664\u5206\u7EC4",[b.SELECT_HISTORY]:"\u9009\u62E9\u8BB0\u5F55",[le.CANVAS]:"\u753B\u5E03\u521D\u59CB\u5316"};var It=Array.prototype,Pt=It.reverse;function Ut(e){return e==null?e:Pt.call(e)}var Bt=Ut;const Xe=e=>(ge("data-v-625e03d4"),e=e(),fe(),e),Ft={class:"go-flex-items-center"},Ht=Xe(()=>D("span",{class:"btn-text"},"\u5386\u53F2\u8BB0\u5F55",-1)),Ot={class:"history-list-box"},Yt=["title"],Xt=Xe(()=>D("div",{class:"popover-modal"},null,-1)),Gt=G({__name:"index",setup(e){const{DesktopOutlineIcon:c,PencilIcon:n,TrashIcon:i,CopyIcon:o,LayersIcon:d,DuplicateIcon:h,HelpOutlineIcon:C}=re.ionicons5,{StackedMoveIcon:u,Carbon3DCursorIcon:r,Carbon3DSoftwareIcon:g}=re.carbon,a=je(),t=l=>{if(l.targetType===le.CANVAS)return c;switch(l.actionType){case b.UPDATE:return n;case b.DELETE:return i;case b.PASTE:return o;case b.TOP:return d;case b.BOTTOM:return d;case b.UP:return d;case b.DOWN:return d;case b.MOVE:return u;case b.ADD:return h;case b.GROUP:return r;case b.UN_GROUP:return g;default:return n}},p=l=>{if(l.targetType===le.CANVAS)return Ce[le.CANVAS];if(l.actionType===b.GROUP||l.actionType===b.UN_GROUP)return`${Ce[l.actionType]}`;if(l.historyData.length)return`${Ce[l.actionType]} - ${l.historyData[0].chartConfig.title}`},f=$(()=>{const v=a.getBackStack.map(T=>({label:p(T),icon:t(T)}));return Bt(v.filter(T=>T.label))});return(l,v)=>{const T=L("n-button"),y=L("n-icon"),x=L("n-text"),I=L("n-scrollbar"),k=L("n-popover"),z=L("n-tooltip");return S(),R("div",Ft,[E(k,{class:"edit-history-popover","show-arrow":!1,size:"small",trigger:"click",placement:"top-start"},{trigger:w(()=>[E(T,{class:"mr-10",secondary:"",size:"small",disabled:s(f).length===0},{default:w(()=>[Ht]),_:1},8,["disabled"])]),default:w(()=>[D("div",Ot,[E(I,{style:{"max-height":"500px"}},{default:w(()=>[(S(!0),R(J,null,te(s(f),(m,Y)=>(S(),R("div",{class:"list-item go-flex-items-center go-ellipsis-1",key:Y,title:m.label},[E(y,{class:"item-icon",size:"16",depth:2,component:m.icon},null,8,["component"]),E(x,{depth:"2"},{default:w(()=>[Ee(Z(m.label),1)]),_:2},1024)],8,Yt))),128))]),_:1}),Xt])]),_:1}),E(z,{trigger:"hover"},{trigger:w(()=>[E(y,{size:"21",depth:3},{default:w(()=>[E(s(C))]),_:1})]),default:w(()=>[D("span",null,"\u6700\u591A\u53EA\u4FDD\u7559"+Z(s(et))+"\u6761\u8BB0\u5F55",1)]),_:1})])}}});var Kt=V(Gt,[["__scopeId","data-v-625e03d4"]]);const we=e=>(ge("data-v-543f3cff"),e=e(),fe(),e),zt=we(()=>D("th",null,"\u529F\u80FD",-1)),Nt=we(()=>D("th",null,"Win \u5FEB\u6377\u952E",-1)),Vt=we(()=>D("span",null," Mac \u5FEB\u6377\u952E ",-1)),Wt=G({__name:"ShortcutKeyModal",props:{modelShow:Boolean},emits:["update:modelShow"],setup(e,{emit:c}){const{CloseIcon:n}=re.ionicons5,i=[{label:"\u5411\u4E0A\u79FB\u52A8",win:`${B.CTRL.toUpperCase()} + \u2191 `,mac:`${F.CTRL.toUpperCase()} + \u2191 `},{label:"\u5411\u53F3\u79FB\u52A8",win:`${B.CTRL.toUpperCase()} + \u2192 `,mac:`${F.CTRL.toUpperCase()} + \u2192 `},{label:"\u5411\u4E0B\u79FB\u52A8",win:`${B.CTRL.toUpperCase()} + \u2193 `,mac:`${F.CTRL.toUpperCase()} + \u2193 `},{label:"\u5411\u5DE6\u79FB\u52A8",win:`${B.CTRL.toUpperCase()} + \u2190 `,mac:`${F.CTRL.toUpperCase()} + \u2190 `},{label:"\u5220\u9664",win:"Delete".toUpperCase(),mac:`${F.CTRL.toUpperCase()} + Backspace `},{label:"\u590D\u5236",win:`${B.CTRL.toUpperCase()} + C `,mac:`${F.CTRL.toUpperCase()} + C `},{label:"\u526A\u5207",win:`${B.CTRL.toUpperCase()} + X `,mac:`${F.CTRL.toUpperCase()} + X `},{label:"\u7C98\u8D34",win:`${B.CTRL.toUpperCase()} + V `,mac:`${F.CTRL.toUpperCase()} + V `},{label:"\u540E\u9000",win:`${B.CTRL.toUpperCase()} + Z `,mac:`${F.CTRL.toUpperCase()} + Z `},{label:"\u524D\u8FDB",win:`${B.CTRL.toUpperCase()} + ${B.SHIFT.toUpperCase()} + Z `,mac:`${F.CTRL.toUpperCase()} + ${F.SHIFT.toUpperCase()} + Z `},{label:"\u591A\u9009",win:`${B.CTRL.toUpperCase()} + \u{1F5B1}\uFE0F `,mac:`${F.CTRL_SOURCE_KEY.toUpperCase()} + \u{1F5B1}\uFE0F `},{label:"\u521B\u5EFA\u5206\u7EC4",win:`${B.CTRL.toUpperCase()} + G / \u{1F5B1}\uFE0F `,mac:`${F.CTRL_SOURCE_KEY.toUpperCase()} + G / \u{1F5B1}\uFE0F`},{label:"\u89E3\u9664\u5206\u7EC4",win:`${B.CTRL.toUpperCase()} + ${B.SHIFT.toUpperCase()} + G `,mac:`${F.CTRL_SOURCE_KEY.toUpperCase()} + ${B.SHIFT.toUpperCase()} + G `}],o=()=>{c("update:modelShow",!1)};return(d,h)=>{const C=L("n-icon"),u=L("n-space"),r=L("n-gradient-text"),g=L("n-table"),a=L("n-modal");return S(),K(a,{show:e.modelShow,"onUpdate:show":h[0]||(h[0]=t=>tt(modelShow)?modelShow.value=t:null),"mask-closable":!0,onAfterLeave:o},{default:w(()=>[E(g,{class:"model-content",bordered:!1,"single-line":!1},{default:w(()=>[D("thead",null,[D("tr",null,[zt,Nt,D("th",null,[E(u,{justify:"space-between"},{default:w(()=>[Vt,E(C,{size:"20",class:"go-cursor-pointer",onClick:o},{default:w(()=>[E(s(n))]),_:1})]),_:1})])])]),D("tbody",null,[(S(),R(J,null,te(i,(t,p)=>D("tr",{key:p},[D("td",null,Z(t.label),1),D("td",null,Z(t.win),1),D("td",null,[E(r,{size:22},{default:w(()=>[Ee(Z(t.mac.substr(0,1)),1)]),_:2},1024),Ee(" + "+Z(t.mac.substr(3)),1)])])),64))])]),_:1})]),_:1},8,["show"])}}});var jt=V(Wt,[["__scopeId","data-v-543f3cff"]]);const qt=e=>(ge("data-v-66885b97"),e=e(),fe(),e),Zt={class:"go-edit-shortcut"},Jt=qt(()=>D("span",null,"\u5FEB\u6377\u952E",-1)),Qt=G({__name:"index",setup(e){const{DicomOverlayIcon:c}=re.carbon,n=ee(!1);return(i,o)=>{const d=L("n-icon"),h=L("n-button"),C=L("n-tooltip");return S(),R("div",Zt,[E(jt,{modelShow:n.value,"onUpdate:modelShow":o[0]||(o[0]=u=>n.value=u)},null,8,["modelShow"]),E(C,{trigger:"hover"},{trigger:w(()=>[E(h,{class:"scale-btn",secondary:"",size:"small",onClick:o[1]||(o[1]=u=>n.value=!0)},{default:w(()=>[E(d,{size:"21",depth:3},{default:w(()=>[E(s(c))]),_:1})]),_:1})]),default:w(()=>[Jt]),_:1})])}}});var eo=V(Qt,[["__scopeId","data-v-66885b97"]]);const to={class:"go-edit-bottom"},oo=G({__name:"index",setup(e){ce(v=>({"51b8eaac":o.value}));const{LockClosedOutlineIcon:c,LockOpenOutlineIcon:n}=re.ionicons5,i=ue(),o=ee(i.getAppTheme),d=N(),{lockScale:h,scale:C}=he(d.getEditCanvas);let u=[{label:"200%",value:200},{label:"150%",value:150},{label:"100%",value:100},{label:"50%",value:50},{label:"\u81EA\u9002\u5E94",value:0}];const r=ee(""),g=v=>{if(v===0){d.computedScale();return}d.setScale(v/100)},a=()=>{d.setEditCanvas(O.LOCK_SCALE,!h.value)},t=ee(100),p=v=>`${v}%`,f=v=>{d.setScale(v/100)},l=Fe({100:""});return ot(()=>{const v=(C.value*100).toFixed(0);r.value=`${v}%`,t.value=parseInt(v)}),(v,T)=>{const y=L("n-select"),x=L("n-icon"),I=L("n-button"),k=L("n-tooltip"),z=L("n-slider"),m=L("n-space");return S(),R("div",to,[E(s(Kt)),E(m,{class:"bottom-ri"},{default:w(()=>[E(eo),E(y,{disabled:s(h),class:"scale-btn",value:r.value,"onUpdate:value":[T[0]||(T[0]=Y=>r.value=Y),g],size:"mini",options:s(u)},null,8,["disabled","value","options"]),E(k,{trigger:"hover"},{trigger:w(()=>[E(I,{onClick:a,text:""},{default:w(()=>[E(x,{class:q(["lock-icon",{color:s(h)}]),size:"18",depth:2},{default:w(()=>[s(h)?(S(),K(s(c),{key:0})):(S(),K(s(n),{key:1}))]),_:1},8,["class"])]),_:1})]),default:w(()=>[D("span",null,Z(s(h)?"\u89E3\u9501":"\u9501\u5B9A")+"\u5F53\u524D\u6BD4\u4F8B",1)]),_:1}),E(z,{class:"scale-slider",value:t.value,"onUpdate:value":[T[1]||(T[1]=Y=>t.value=Y),f],"default-value":50,min:10,max:200,step:5,"format-tooltip":p,disabled:s(h),marks:l},null,8,["value","disabled","marks"])]),_:1})])}}});var so=V(oo,[["__scopeId","data-v-1b8f7db0"]]);const no=G({__name:"index",setup(e){const c=N(),{handleContextMenu:n}=Te();it();const{mouseenterHandle:i,mouseleaveHandle:o,mousedownHandle:d,mouseClickHandle:h}=Oe(),C=(a,t,p)=>{const f=[ae.GROUP,ae.DELETE],l=a;if(c.getTargetChart.selectId.length>1){const v=[];return t.forEach(T=>{f.includes(T.key)&&v.push(T)}),v}return l},u=$(()=>c.getEditCanvasConfig.chartThemeSetting),r=$(()=>{const a=c.getEditCanvasConfig.chartThemeColor;return Ie[a]});$(()=>c.getEditCanvasConfig.filterShow);const g=$(()=>{const a=c.getEditCanvasConfig.background,t=c.getEditCanvasConfig.backgroundImage,l=c.getEditCanvasConfig.selectColor?{background:a||void 0}:{background:`url(${t}) no-repeat center center / cover !important`};return $e(M({},l),{width:"inherit",height:"inherit"})});return Pe(()=>{nt()}),(a,t)=>(S(),R(J,null,[E(s(Rt)),E(s(ut),{id:"go-chart-edit-layout",flex:!0,showTop:!1,showBottom:!0,depth:1,xScroll:!0,onMousedown:s(He),onDrop:s(pt),onDragover:s(Re),onDragenter:s(Re)},{bottom:w(()=>[E(s(so))]),default:w(()=>[D("div",{id:"go-chart-edit-content",onContextmenu:t[0]||(t[0]=(...p)=>s(n)&&s(n)(...p))},[E(s(kt),null,{default:w(()=>[D("div",{style:X(M(M({},s(ie)(s(c).getEditCanvasConfig)),s(g)))},[(S(!0),R(J,null,te(s(c).getComponentList,(p,f)=>(S(),R("div",{key:p.id},[p.isGroup?(S(),K(s(yt),{key:0,groupData:p,groupIndex:f},null,8,["groupData","groupIndex"])):(S(),K(s(xe),{key:1,"data-id":p.id,index:f,style:X(s(_e)(p.attr,f)),item:p,onClick:l=>s(h)(l,p),onMousedown:l=>s(d)(l,p),onMouseenter:l=>s(i)(l,p),onMouseleave:l=>s(o)(l,p),onContextmenu:l=>s(n)(l,p,C)},{default:w(()=>[(S(),K(Be(p.chartConfig.chartKey),{class:q(["edit-content-chart",s(me)(p.styles.animations)]),chartConfig:p,themeSetting:s(u),themeColor:s(r),style:X(M(M(M({},s(Q)(p.attr)),s(ie)(p.styles)),s(ye)(p.styles)))},null,8,["class","chartConfig","themeSetting","themeColor","style"]))]),_:2},1032,["data-id","index","style","item","onClick","onMousedown","onMouseenter","onMouseleave","onContextmenu"]))]))),128))],4)]),_:1})],32)]),_:1},8,["onMousedown","onDrop","onDragover","onDragenter"])],64))}});var To=V(no,[["__scopeId","data-v-1478ab4e"]]);export{To as default};
