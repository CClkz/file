var R=(C,A,f)=>new Promise((k,g)=>{var y=i=>{try{o(f.next(i))}catch(_){g(_)}},l=i=>{try{o(f.throw(i))}catch(_){g(_)}},o=i=>i.done?k(i.value):Promise.resolve(i.value).then(y,l);o((f=f.apply(C,A)).next())});import{m as de,c as ce,x as P,ao as re,aI as v,e as a,o as p,n as b,h as e,w as t,u,ac as _e,$ as pe,a0 as me,B as w,q as r,t as D,d4 as S,F as G,D as N,f as T,O as L,an as Ce,d5 as fe,H as Fe,I as Ee}from"./index-2ef5172e.js";import{_ as ge}from"./noImage-91f53245.js";import{F as z}from"./fileTypeEnum-2ae15dd8.js";import{u as ve,m}from"./chartEditStore-d9c3f109.js";import{i as V}from"./icon-bc76e888.js";import{l as be}from"./index-f0373fc0.js";import"./plugin-2a355f86.js";import"./settingStore-3ad4048f.js";import"./index-6cceb343.js";import"./index-cd811b92.js";const we=C=>(Fe("data-v-23d9bd02"),C=C(),Ee(),C),Ae={class:"go-canvas-setting"},ke=["src"],ye={class:"upload-img"},he=we(()=>w("img",{src:ge},null,-1)),Ie={class:"preview-mode"},Be=ce({__name:"index",setup(C){const{ColorPaletteIcon:A}=V.ionicons5,{ScaleIcon:f,FitToScreenIcon:k,FitToHeightIcon:g,FitToWidthIcon:y}=V.carbon,l=ve(),o=l.getEditCanvasConfig,i=l.getEditCanvas,_=P(),h=P(!1),$=be(()=>re(()=>import("./index-aec3777b.js"),["static/js/index-aec3777b.js","static/css/index-a04bed18.css","static/js/index-2ef5172e.js","static/css/index-9c5d8350.css","static/js/chartEditStore-d9c3f109.js","static/js/plugin-2a355f86.js","static/js/icon-bc76e888.js","static/js/settingStore-3ad4048f.js"])),H=["#232324","#2a2a2b","#313132","#373739","#757575","#e0e0e0","#eeeeee","#fafafa"],Y=[{key:"ChartTheme",title:"\u4E3B\u9898\u989C\u8272",icon:A,render:$}],M=[{key:v.FIT,title:"\u81EA\u9002\u5E94",icon:f,desc:"\u81EA\u9002\u5E94\u6BD4\u4F8B\u5C55\u793A\uFF0C\u9875\u9762\u4F1A\u6709\u7559\u767D"},{key:v.SCROLL_Y,title:"Y\u8F74\u6EDA\u52A8",icon:y,desc:"X\u8F74\u94FA\u6EE1\uFF0CY\u8F74\u81EA\u9002\u5E94\u6EDA\u52A8"},{key:v.SCROLL_X,title:"X\u8F74\u6EDA\u52A8",icon:g,desc:"Y\u8F74\u94FA\u6EE1\uFF0CX\u8F74\u81EA\u9002\u5E94\u6EDA\u52A8"},{key:v.FULL,title:"\u94FA\u6EE1",icon:k,desc:"\u5F3A\u884C\u62C9\u4F38\u753B\u9762\uFF0C\u586B\u5145\u6240\u6709\u89C6\u56FE"}],x=d=>d>50,U=()=>{l.computedScale()},X=s=>R(this,[s],function*({file:d}){_.value=[];const c=d.file.type;return d.file.size>1024*1024*S?(window.$message.warning(`\u56FE\u7247\u8D85\u51FA ${S}M \u9650\u5236\uFF0C\u8BF7\u91CD\u65B0\u4E0A\u4F20\uFF01`),!1):c!==z.PNG&&c!==z.JPEG&&c!==z.GIF?(window.$message.warning("\u6587\u4EF6\u683C\u5F0F\u4E0D\u7B26\u5408\uFF0C\u8BF7\u91CD\u65B0\u4E0A\u4F20\uFF01"),!1):!0}),K=()=>{l.setEditCanvasConfig(m.BACKGROUND_IMAGE,void 0),l.setEditCanvasConfig(m.SELECT_COLOR,!0)},q=()=>{l.setEditCanvasConfig(m.BACKGROUND,void 0),o.backgroundImage&&l.setEditCanvasConfig(m.SELECT_COLOR,!1)},W=()=>{h.value=!0,setTimeout(()=>{h.value=!1},1e3)},j=d=>{const{file:s}=d;Ce(()=>{if(s.file){const c=fe(s.file);l.setEditCanvasConfig(m.BACKGROUND_IMAGE,c),l.setEditCanvasConfig(m.SELECT_COLOR,!1)}else window.$message.error("\u6DFB\u52A0\u56FE\u7247\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5\uFF01")})},J=d=>{l.setEditCanvasConfig(m.PREVIEW_SCALE_TYPE,d)};return(d,s)=>{const c=a("n-input-number"),I=a("n-form-item"),Q=a("n-form"),F=a("n-text"),Z=a("n-upload-dragger"),ee=a("n-upload"),te=a("n-card"),ne=a("n-color-picker"),E=a("n-space"),oe=a("n-switch"),B=a("n-button"),O=a("n-icon"),ue=a("n-tooltip"),ae=a("n-button-group"),se=a("n-divider"),le=a("n-tab-pane"),ie=a("n-tabs");return p(),b("div",Ae,[e(Q,{inline:"","label-width":45,size:"small","label-placement":"left"},{default:t(()=>[e(I,{label:"\u5BBD\u5EA6"},{default:t(()=>[e(c,{size:"small",value:u(o).width,"onUpdate:value":[s[0]||(s[0]=n=>u(o).width=n),U],disabled:u(i).lockScale,validator:x},null,8,["value","disabled"])]),_:1}),e(I,{label:"\u9AD8\u5EA6"},{default:t(()=>[e(c,{size:"small",value:u(o).height,"onUpdate:value":[s[1]||(s[1]=n=>u(o).height=n),U],disabled:u(i).lockScale,validator:x},null,8,["value","disabled"])]),_:1})]),_:1}),e(te,{class:"upload-box"},{default:t(()=>[e(ee,{"file-list":_.value,"onUpdate:file-list":s[2]||(s[2]=n=>_.value=n),"show-file-list":!1,customRequest:j,onBeforeUpload:X},{default:t(()=>[e(Z,null,{default:t(()=>[u(o).backgroundImage?(p(),b("img",{key:0,class:"upload-show",src:u(o).backgroundImage,alt:"\u80CC\u666F"},null,8,ke)):_e("",!0),pe(w("div",ye,[he,e(F,{class:"upload-desc",depth:"3"},{default:t(()=>[r(" \u80CC\u666F\u56FE\u9700\u5C0F\u4E8E "+D(u(S))+"M \uFF0C\u683C\u5F0F\u4E3A png/jpg/gif \u7684\u6587\u4EF6 ",1)]),_:1})],512),[[me,!u(o).backgroundImage]])]),_:1})]),_:1},8,["file-list"])]),_:1}),e(E,{vertical:"",size:12},{default:t(()=>[e(E,null,{default:t(()=>[e(F,null,{default:t(()=>[r("\u80CC\u666F\u8272")]),_:1}),e(ne,{style:{width:"326px"},showPreview:!0,swatches:H,value:u(o).background,"onUpdate:value":s[3]||(s[3]=n=>u(o).background=n)},null,8,["value"])]),_:1}),e(E,null,{default:t(()=>[e(F,null,{default:t(()=>[r("\u989C\u8272\u5E94\u7528")]),_:1}),e(oe,{size:"small",value:u(o).selectColor,"onUpdate:value":s[4]||(s[4]=n=>u(o).selectColor=n),loading:h.value,round:!1,disabled:!u(o).backgroundImage,onUpdate:W},null,8,["value","loading","disabled"])]),_:1}),e(E,null,{default:t(()=>[e(F,null,{default:t(()=>[r("\u80CC\u666F\u63A7\u5236")]),_:1}),e(B,{size:"small",disabled:!u(o).backgroundImage,onClick:K},{default:t(()=>[r("\u6E05\u9664\u80CC\u666F\u56FE")]),_:1},8,["disabled"]),e(B,{size:"small",disabled:!u(o).background,onClick:q},{default:t(()=>[r("\u6E05\u9664\u989C\u8272")]),_:1},8,["disabled"])]),_:1}),w("div",Ie,[e(F,null,{default:t(()=>[r("\u9884\u89C8\u65B9\u5F0F")]),_:1}),e(ae,{style:{width:"100%"}},{default:t(()=>[(p(),b(G,null,N(M,n=>e(B,{ghost:"",round:!1,key:n.key,type:u(o).previewScaleType===n.key?"primary":"tertiary",size:"small",onClick:De=>J(n.key)},{default:t(()=>[e(ue,{"show-arrow":!1,trigger:"hover"},{trigger:t(()=>[e(O,{size:"18"},{default:t(()=>[(p(),T(L(n.icon)))]),_:2},1024)]),default:t(()=>[r(" "+D(n.desc),1)]),_:2},1024)]),_:2},1032,["type","onClick"])),64))]),_:1})])]),_:1}),e(se,{style:{margin:"10px 0"}}),e(ie,{class:"tabs-box",size:"small",type:"segment"},{default:t(()=>[(p(),b(G,null,N(Y,n=>e(le,{key:n.key,name:n.key,size:"small","display-directive":"show:lazy"},{tab:t(()=>[e(E,null,{default:t(()=>[w("span",null,D(n.title),1),e(O,{size:"16",class:"icon-position"},{default:t(()=>[(p(),T(L(n.icon)))]),_:2},1024)]),_:2},1024)]),default:t(()=>[(p(),T(L(n.render)))]),_:2},1032,["name"])),64))]),_:1})])}}});var Ve=de(Be,[["__scopeId","data-v-23d9bd02"]]);export{Ve as default};
